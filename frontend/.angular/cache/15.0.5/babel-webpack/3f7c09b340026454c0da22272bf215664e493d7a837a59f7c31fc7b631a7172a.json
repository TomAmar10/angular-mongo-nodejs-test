{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { Validators } from \"@angular/forms\";\nlet OperationFormComponent = class OperationFormComponent {\n  constructor(taskService, accountsService, fb, route) {\n    this.taskService = taskService;\n    this.accountsService = accountsService;\n    this.fb = fb;\n    this.route = route;\n    this.currType = \"\";\n    this.myForm = this.fb.group({\n      account: [null, [Validators.required]],\n      type: [null, [Validators.required]],\n      amount: [null, [Validators.required]],\n      created: [null, [Validators.required]],\n      interest: [0],\n      payments: [1]\n    });\n    this.isValid = true;\n    this.errorMsg = \"\";\n    this.paramsId = \"\";\n    this.types = [\"deposit\", \"withdraw\", \"loan\"];\n  }\n  ngOnInit() {\n    this.accountsService.getAll();\n    this.accounts$ = this.accountsService.accounts$;\n    this.route.params.subscribe(res => this.paramsId = res[\"id\"]);\n    if (this.paramsId) {\n      this.taskService.getById(this.paramsId).subscribe(res => {\n        this.myForm = this.fb.group({\n          type: [res.type, [Validators.required]],\n          amount: [res.amount, [Validators.required]],\n          created: [this.toValidDate(res.created), [Validators.required]],\n          account: [res.account._id, [Validators.required]],\n          interest: [res.interest],\n          payments: [res.payments]\n        });\n      });\n    }\n  }\n  onSubmit() {\n    if (this.myForm.invalid) {\n      this.isValid = false;\n      return;\n    }\n    this.newOperation = {\n      ...this.myForm.value\n    };\n    if (this.paramsId) {\n      this.taskService.update(this.paramsId, this.newOperation);\n      return;\n    }\n    this.taskService.create(this.newOperation);\n  }\n  validate() {\n    this.isValid = true;\n  }\n  toValidDate(date) {\n    return new Date(date).toISOString().split(\".\")[0];\n  }\n  typeChange(str) {\n    this.currType = str.split(\" \")[1];\n  }\n};\nOperationFormComponent = __decorate([Component({\n  selector: \"app-operation-form\",\n  templateUrl: \"./operation-form.component.html\",\n  styleUrls: [\"./operation-form.component.css\"]\n})], OperationFormComponent);\nexport { OperationFormComponent };","map":{"version":3,"mappings":"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","names":["Component","Validators","OperationFormComponent","constructor","taskService","accountsService","fb","route","group","account","required","type","amount","created","interest","payments","ngOnInit","getAll","accounts$","params","subscribe","res","paramsId","getById","myForm","toValidDate","_id","onSubmit","invalid","isValid","newOperation","value","update","create","validate","date","Date","toISOString","split","typeChange","str","currType","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\user\\OneDrive\\Desktop\\John Brice\\mongoDB\\TomAmar_test4\\frontend\\src\\app\\components\\operation-form\\operation-form.component.ts"],"sourcesContent":["import { Component, Input, OnInit } from \"@angular/core\";\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { Observable } from \"rxjs\";\nimport CustomerModel from \"src/app/models/account-model\";\nimport OperationModel from \"src/app/models/operation-model\";\nimport { AccountsService } from \"src/app/services/accounts.service\";\nimport { OperationsService } from \"src/app/services/operations.service\";\n\n@Component({\n  selector: \"app-operation-form\",\n  templateUrl: \"./operation-form.component.html\",\n  styleUrls: [\"./operation-form.component.css\"],\n})\nexport class OperationFormComponent implements OnInit {\n  accounts$: Observable<CustomerModel[]>;\n\n  currType = \"\";\n\n  myForm: FormGroup = this.fb.group({\n    account: [null, [Validators.required]],\n    type: [null, [Validators.required]],\n    amount: [null, [Validators.required]],\n    created: [null, [Validators.required]],\n    interest: [0],\n    payments: [1],\n  });\n  newOperation: OperationModel;\n  isValid = true;\n  errorMsg = \"\";\n  paramsId = \"\";\n\n  types: string[] = [\"deposit\", \"withdraw\", \"loan\"];\n\n  constructor(\n    private taskService: OperationsService,\n    private accountsService: AccountsService,\n    private fb: FormBuilder,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit(): void {\n    this.accountsService.getAll();\n    this.accounts$ = this.accountsService.accounts$;\n\n    this.route.params.subscribe((res) => (this.paramsId = res[\"id\"]));\n    if (this.paramsId) {\n      this.taskService\n        .getById(this.paramsId)\n        .subscribe((res: OperationModel) => {\n          this.myForm = this.fb.group({\n            type: [res.type, [Validators.required]],\n            amount: [res.amount, [Validators.required]],\n            created: [this.toValidDate(res.created), [Validators.required]],\n            account: [res.account._id, [Validators.required]],\n            interest: [res.interest],\n            payments: [res.payments],\n          });\n        });\n    }\n  }\n\n  onSubmit() {\n    if (this.myForm.invalid) {\n      this.isValid = false;\n      return;\n    }\n    this.newOperation = { ...this.myForm.value };\n    if (this.paramsId) {\n      this.taskService.update(this.paramsId, this.newOperation);\n      return;\n    }\n    this.taskService.create(this.newOperation);\n  }\n\n  validate() {\n    this.isValid = true;\n  }\n\n  toValidDate(date: string) {\n    return new Date(date).toISOString().split(\".\")[0];\n  }\n\n  typeChange(str: string) {\n    this.currType = str.split(\" \")[1];\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}