{"ast":null,"code":"import { Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/operations.service\";\nimport * as i2 from \"src/app/services/accounts.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction OperationFormComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1, \"please fill all details\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OperationFormComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 13, 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", item_r6);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r6, \" \");\n  }\n}\nfunction OperationFormComponent_option_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", item_r8._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r8.number, \" \");\n  }\n}\nfunction OperationFormComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\");\n    i0.ɵɵtext(2, \"Interest:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 14);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OperationFormComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\");\n    i0.ɵɵtext(2, \"Payments:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 15);\n    i0.ɵɵelementEnd();\n  }\n}\nexport class OperationFormComponent {\n  constructor(taskService, accountsService, fb, route) {\n    this.taskService = taskService;\n    this.accountsService = accountsService;\n    this.fb = fb;\n    this.route = route;\n    this.currType = \"\";\n    this.myForm = this.fb.group({\n      account: [null, [Validators.required]],\n      type: [null, [Validators.required]],\n      amount: [null, [Validators.required]],\n      created: [null, [Validators.required]],\n      interest: [null],\n      payments: [null]\n    });\n    this.isValid = true;\n    this.errorMsg = \"\";\n    this.paramsId = \"\";\n    this.types = [\"deposit\", \"withdraw\", \"loan\"];\n  }\n  ngOnInit() {\n    this.accountsService.getAll();\n    this.accounts$ = this.accountsService.accounts$;\n    this.route.params.subscribe(res => this.paramsId = res[\"id\"]);\n    if (this.paramsId) {\n      this.taskService.getById(this.paramsId).subscribe(res => {\n        this.myForm = this.fb.group({\n          type: [res.type, [Validators.required]],\n          amount: [res.amount, [Validators.required]],\n          created: [this.toValidDate(res.created), [Validators.required]],\n          account: [res.account._id, [Validators.required]],\n          interest: [res.interest, this.currType === 'loan' && [Validators.required]],\n          payments: [res.payments]\n        });\n      });\n    }\n  }\n  onSubmit() {\n    if (this.myForm.invalid) {\n      this.isValid = false;\n      return;\n    }\n    this.newOperation = {\n      ...this.myForm.value\n    };\n    if (this.paramsId) {\n      this.taskService.update(this.paramsId, this.newOperation);\n      return;\n    }\n    this.taskService.create(this.newOperation);\n  }\n  validate() {\n    this.isValid = true;\n  }\n  toValidDate(date) {\n    return new Date(date).toISOString().split(\".\")[0];\n  }\n  typeChange(str) {\n    this.currType = str.split(\" \")[1];\n  }\n}\nOperationFormComponent.ɵfac = function OperationFormComponent_Factory(t) {\n  return new (t || OperationFormComponent)(i0.ɵɵdirectiveInject(i1.OperationsService), i0.ɵɵdirectiveInject(i2.AccountsService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n};\nOperationFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OperationFormComponent,\n  selectors: [[\"app-operation-form\"]],\n  decls: 34,\n  vars: 12,\n  consts: [[1, \"form-container\"], [3, \"formGroup\", \"ngSubmit\"], [\"class\", \"error-msg\", 4, \"ngIf\"], [\"formControlName\", \"type\", 3, \"change\"], [\"userType\", \"\"], [\"disabled\", \"\", 3, \"ngValue\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"number\", \"formControlName\", \"amount\", 3, \"change\"], [\"formControlName\", \"account\", 3, \"change\"], [\"type\", \"datetime-local\", \"formControlName\", \"created\", 3, \"change\"], [4, \"ngIf\"], [1, \"submit-btn\"], [1, \"error-msg\"], [3, \"ngValue\"], [\"type\", \"number\", \"formControlName\", \"interest\"], [\"type\", \"number\", \"formControlName\", \"payments\"]],\n  template: function OperationFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r9 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1);\n      i0.ɵɵlistener(\"ngSubmit\", function OperationFormComponent_Template_form_ngSubmit_1_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(2, \"h1\");\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, OperationFormComponent_span_4_Template, 2, 0, \"span\", 2);\n      i0.ɵɵelementStart(5, \"div\")(6, \"label\");\n      i0.ɵɵtext(7, \"Type:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"select\", 3, 4);\n      i0.ɵɵlistener(\"change\", function OperationFormComponent_Template_select_change_8_listener() {\n        i0.ɵɵrestoreView(_r9);\n        const _r1 = i0.ɵɵreference(9);\n        return i0.ɵɵresetView(ctx.typeChange(_r1.value));\n      });\n      i0.ɵɵelementStart(10, \"option\", 5);\n      i0.ɵɵtext(11, \"choose type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, OperationFormComponent_option_12_Template, 3, 2, \"option\", 6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"div\")(14, \"label\");\n      i0.ɵɵtext(15, \"Amount:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"input\", 7);\n      i0.ɵɵlistener(\"change\", function OperationFormComponent_Template_input_change_16_listener() {\n        return ctx.validate();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\")(18, \"label\");\n      i0.ɵɵtext(19, \"account name:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"select\", 8);\n      i0.ɵɵlistener(\"change\", function OperationFormComponent_Template_select_change_20_listener() {\n        return ctx.validate();\n      });\n      i0.ɵɵelementStart(21, \"option\", 5);\n      i0.ɵɵtext(22, \"choose account\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(23, OperationFormComponent_option_23_Template, 2, 2, \"option\", 6);\n      i0.ɵɵpipe(24, \"async\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(25, \"div\")(26, \"label\");\n      i0.ɵɵtext(27, \"Created:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"input\", 9);\n      i0.ɵɵlistener(\"change\", function OperationFormComponent_Template_input_change_28_listener() {\n        return ctx.validate();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(29, OperationFormComponent_div_29_Template, 4, 0, \"div\", 10);\n      i0.ɵɵtemplate(30, OperationFormComponent_div_30_Template, 4, 0, \"div\", 10);\n      i0.ɵɵelementStart(31, \"div\", 11)(32, \"button\");\n      i0.ɵɵtext(33);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.myForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.paramsId ? \"Edit Operation\" : \"Add New Operation\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isValid);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngValue\", null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.types);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngValue\", null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(24, 10, ctx.accounts$));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.currType === \"loan\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.currType === \"loan\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.paramsId ? \"Save\" : \"Add\");\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, i5.AsyncPipe],\n  styles: [\".form-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n  margin-top: 2rem;\\r\\n}\\r\\n\\r\\nh1[_ngcontent-%COMP%] {\\r\\n  margin-top: 0;\\r\\n  margin-bottom: 1rem;\\r\\n}\\r\\n\\r\\nform[_ngcontent-%COMP%] {\\r\\n  border: 1px black solid;\\r\\n  padding: 1rem;\\r\\n  border-radius: 10px;\\r\\n}\\r\\n\\r\\nform[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\\r\\n  width: 24rem;\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  font-size: 1.2rem;\\r\\n  margin-bottom:1rem;\\r\\n  margin-top: 0.5rem;\\r\\n}\\r\\n\\r\\ninput[type=number][_ngcontent-%COMP%], input[type=datetime-local][_ngcontent-%COMP%] {\\r\\n  border-radius: 5px;\\r\\n  font-size: 1rem;\\r\\n  padding: 0.2rem 0.5rem;\\r\\n  width: 12.5rem;\\r\\n  border: none;\\r\\n  outline: 3px rgb(106, 104, 104) solid;\\r\\n}\\r\\nform[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\r\\n  border-radius: 5px;\\r\\n  width: 13.5rem;\\r\\n  padding: 0.2rem 0.5rem;\\r\\n  font-size: 1rem;\\r\\n  padding: 0.2rem 1rem;\\r\\n  border: none;\\r\\n  outline: 3px rgb(106, 104, 104) solid;\\r\\n}\\r\\nform[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{\\r\\n  width: 1rem;\\r\\n  margin-right: 1rem;\\r\\n  margin-left: -2rem;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\nform[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]{\\r\\n  background-color: rgb(6, 90, 6);\\r\\n  border: 1px white solid;\\r\\n  font-size: 1rem;\\r\\n  margin-top: 0.5rem;\\r\\n  font-weight: bold;\\r\\n  color: white;\\r\\n  border-radius: 5px;\\r\\n  padding: 0.3rem 1rem;\\r\\n  cursor: pointer;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]:hover{\\r\\n  background-color: rgb(13, 123, 13);\\r\\n  padding: 0.3rem 1.1rem;\\r\\n}\\r\\n\\r\\n.error-msg[_ngcontent-%COMP%]{\\r\\n  color: red;\\r\\n  font-size: 1.1rem;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9vcGVyYXRpb24tZm9ybS9vcGVyYXRpb24tZm9ybS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIsYUFBYTtFQUNiLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixzQkFBc0I7RUFDdEIsY0FBYztFQUNkLFlBQVk7RUFDWixxQ0FBcUM7QUFDdkM7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2Qsc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixvQkFBb0I7RUFDcEIsWUFBWTtFQUNaLHFDQUFxQztBQUN2QztBQUNBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7QUFDekI7QUFDQTtFQUNFLCtCQUErQjtFQUMvQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixpQkFBaUI7RUFDakIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsZUFBZTtBQUNqQjtBQUNBO0VBQ0Usa0NBQWtDO0VBQ2xDLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLFVBQVU7RUFDVixpQkFBaUI7QUFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyIuZm9ybS1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIG1hcmdpbi10b3A6IDJyZW07XHJcbn1cclxuXHJcbmgxIHtcclxuICBtYXJnaW4tdG9wOiAwO1xyXG4gIG1hcmdpbi1ib3R0b206IDFyZW07XHJcbn1cclxuXHJcbmZvcm0ge1xyXG4gIGJvcmRlcjogMXB4IGJsYWNrIHNvbGlkO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxufVxyXG5cclxuZm9ybSBkaXYge1xyXG4gIHdpZHRoOiAyNHJlbTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBmb250LXNpemU6IDEuMnJlbTtcclxuICBtYXJnaW4tYm90dG9tOjFyZW07XHJcbiAgbWFyZ2luLXRvcDogMC41cmVtO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPW51bWJlcl0sIGlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdIHtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgZm9udC1zaXplOiAxcmVtO1xyXG4gIHBhZGRpbmc6IDAuMnJlbSAwLjVyZW07XHJcbiAgd2lkdGg6IDEyLjVyZW07XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIG91dGxpbmU6IDNweCByZ2IoMTA2LCAxMDQsIDEwNCkgc29saWQ7XHJcbn1cclxuZm9ybSBzZWxlY3Qge1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICB3aWR0aDogMTMuNXJlbTtcclxuICBwYWRkaW5nOiAwLjJyZW0gMC41cmVtO1xyXG4gIGZvbnQtc2l6ZTogMXJlbTtcclxuICBwYWRkaW5nOiAwLjJyZW0gMXJlbTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgb3V0bGluZTogM3B4IHJnYigxMDYsIDEwNCwgMTA0KSBzb2xpZDtcclxufVxyXG5mb3JtIGlucHV0W3R5cGU9Y2hlY2tib3hde1xyXG4gIHdpZHRoOiAxcmVtO1xyXG4gIG1hcmdpbi1yaWdodDogMXJlbTtcclxuICBtYXJnaW4tbGVmdDogLTJyZW07XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5mb3JtIGRpdjpsYXN0LWNoaWxkIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcbmJ1dHRvbntcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNiwgOTAsIDYpO1xyXG4gIGJvcmRlcjogMXB4IHdoaXRlIHNvbGlkO1xyXG4gIGZvbnQtc2l6ZTogMXJlbTtcclxuICBtYXJnaW4tdG9wOiAwLjVyZW07XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBwYWRkaW5nOiAwLjNyZW0gMXJlbTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuYnV0dG9uOmhvdmVye1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxMywgMTIzLCAxMyk7XHJcbiAgcGFkZGluZzogMC4zcmVtIDEuMXJlbTtcclxufVxyXG5cclxuLmVycm9yLW1zZ3tcclxuICBjb2xvcjogcmVkO1xyXG4gIGZvbnQtc2l6ZTogMS4xcmVtO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","i0","OperationFormComponent","constructor","taskService","accountsService","fb","route","group","account","required","type","amount","created","interest","payments","ngOnInit","getAll","accounts$","params","subscribe","res","paramsId","getById","myForm","toValidDate","_id","currType","onSubmit","invalid","isValid","newOperation","value","update","create","validate","date","Date","toISOString","split","typeChange","str","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\user\\OneDrive\\Desktop\\John Brice\\mongoDB\\TomAmar_test4\\frontend\\src\\app\\components\\operation-form\\operation-form.component.ts","C:\\Users\\user\\OneDrive\\Desktop\\John Brice\\mongoDB\\TomAmar_test4\\frontend\\src\\app\\components\\operation-form\\operation-form.component.html"],"sourcesContent":["import { Component, Input, OnInit } from \"@angular/core\";\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { Observable } from \"rxjs\";\nimport CustomerModel from \"src/app/models/account-model\";\nimport OperationModel from \"src/app/models/operation-model\";\nimport { AccountsService } from \"src/app/services/accounts.service\";\nimport { OperationsService } from \"src/app/services/operations.service\";\n\n@Component({\n  selector: \"app-operation-form\",\n  templateUrl: \"./operation-form.component.html\",\n  styleUrls: [\"./operation-form.component.css\"],\n})\nexport class OperationFormComponent implements OnInit {\n  accounts$: Observable<CustomerModel[]>;\n\n  currType = \"\";\n\n  myForm: FormGroup = this.fb.group({\n    account: [null, [Validators.required]],\n    type: [null, [Validators.required]],\n    amount: [null, [Validators.required]],\n    created: [null, [Validators.required]],\n    interest: [null],\n    payments: [null],\n  });\n  newOperation: OperationModel;\n  isValid = true;\n  errorMsg = \"\";\n  paramsId = \"\";\n\n  types: string[] = [\"deposit\", \"withdraw\", \"loan\"];\n\n  constructor(\n    private taskService: OperationsService,\n    private accountsService: AccountsService,\n    private fb: FormBuilder,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit(): void {\n    this.accountsService.getAll();\n    this.accounts$ = this.accountsService.accounts$;\n\n    this.route.params.subscribe((res) => (this.paramsId = res[\"id\"]));\n    if (this.paramsId) {\n      this.taskService\n        .getById(this.paramsId)\n        .subscribe((res: OperationModel) => {\n          this.myForm = this.fb.group({\n            type: [res.type, [Validators.required]],\n            amount: [res.amount, [Validators.required]],\n            created: [this.toValidDate(res.created), [Validators.required]],\n            account: [res.account._id, [Validators.required]],\n            interest: [res.interest, this.currType === 'loan' && [Validators.required]],\n            payments: [res.payments],\n          });\n        });\n    }\n  }\n\n  onSubmit() {\n    if (this.myForm.invalid) {\n      this.isValid = false;\n      return;\n    }\n    this.newOperation = { ...this.myForm.value };\n    if (this.paramsId) {\n      this.taskService.update(this.paramsId, this.newOperation);\n      return;\n    }\n    this.taskService.create(this.newOperation);\n  }\n\n  validate() {\n    this.isValid = true;\n  }\n\n  toValidDate(date: string) {\n    return new Date(date).toISOString().split(\".\")[0];\n  }\n\n  typeChange(str: string) {\n    this.currType = str.split(\" \")[1];\n  }\n}\n","<div class=\"form-container\">\n  <form [formGroup]=\"myForm\" (ngSubmit)=\"onSubmit()\">\n    <h1>{{ paramsId ? \"Edit Operation\" : \"Add New Operation\" }}</h1>\n    <span class=\"error-msg\" *ngIf=\"!isValid\">please fill all details</span>\n    <div>\n      <label>Type:</label>\n      <select\n        formControlName=\"type\"\n        #userType\n        (change)=\"typeChange(userType.value)\"\n      >\n        <option [ngValue]=\"null\" disabled>choose type</option>\n        <option *ngFor=\"let item of types\" [ngValue]=\"item\" #userType>\n          {{ item }}\n        </option>\n      </select>\n    </div>\n    <div>\n      <label>Amount:</label>\n      <input type=\"number\" formControlName=\"amount\" (change)=\"validate()\" />\n    </div>\n    <div>\n      <label>account name:</label>\n      <select formControlName=\"account\" (change)=\"validate()\">\n        <option [ngValue]=\"null\" disabled>choose account</option>\n        <option *ngFor=\"let item of accounts$ | async\" [ngValue]=\"item._id\">\n          {{ item.number }}\n        </option>\n      </select>\n    </div>\n    <div>\n      <label>Created:</label>\n      <input\n        type=\"datetime-local\"\n        formControlName=\"created\"\n        (change)=\"validate()\"\n      />\n    </div>\n    <div *ngIf=\"currType === 'loan'\">\n      <label>Interest:</label>\n      <input type=\"number\" formControlName=\"interest\" />\n    </div>\n    <div *ngIf=\"currType === 'loan'\">\n      <label>Payments:</label>\n      <input type=\"number\" formControlName=\"payments\" />\n    </div>\n    <div class=\"submit-btn\">\n      <button>{{ paramsId ? \"Save\" : \"Add\" }}</button>\n    </div>\n  </form>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}